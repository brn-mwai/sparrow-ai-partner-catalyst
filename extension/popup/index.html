<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sparrow AI</title>
  <link rel="stylesheet" href="../assets/brand.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="popup">
    <!-- Header -->
    <header class="popup-header">
      <div class="logo">
        <img src="../assets/icons/icon-32.png" alt="" class="logo-mark">
        <span class="logo-text">Sparrow AI</span>
      </div>
      <div class="header-actions">
        <button class="icon-btn" id="dashboardBtn" title="Open Dashboard">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="3" width="7" height="7"/>
            <rect x="14" y="3" width="7" height="7"/>
            <rect x="14" y="14" width="7" height="7"/>
            <rect x="3" y="14" width="7" height="7"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Loading State -->
    <div class="popup-state" id="loadingState">
      <div class="spinner"></div>
      <p>Loading...</p>
    </div>

    <!-- Auth State -->
    <div class="popup-state hidden" id="authState">
      <div class="auth-content">
        <img src="../assets/icons/icon-48.png" alt="" class="auth-logo">
        <h2>Sign in to Sparrow AI</h2>
        <p>Generate AI-powered briefs for LinkedIn profiles</p>
        <button class="btn btn-primary btn-full" id="signInBtn">Sign In</button>
      </div>
    </div>

    <!-- Main Content - Brief Generator -->
    <div class="popup-main hidden" id="mainContent">
      <!-- LinkedIn URL Input -->
      <div class="generator-section">
        <label class="input-label">LinkedIn Profile URL</label>
        <div class="url-input-wrapper">
          <svg class="url-icon" width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14m-.5 15.5v-5.3a3.26 3.26 0 0 0-3.26-3.26c-.85 0-1.84.52-2.32 1.3v-1.11h-2.79v8.37h2.79v-4.93c0-.77.62-1.4 1.39-1.4a1.4 1.4 0 0 1 1.4 1.4v4.93h2.79M6.88 8.56a1.68 1.68 0 0 0 1.68-1.68c0-.93-.75-1.69-1.68-1.69a1.69 1.69 0 0 0-1.69 1.69c0 .93.76 1.68 1.69 1.68m1.39 9.94v-8.37H5.5v8.37h2.77z"/>
          </svg>
          <input type="text" class="url-input" id="linkedinUrl" placeholder="https://linkedin.com/in/username">
          <button class="clear-btn hidden" id="clearUrl" title="Clear">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
        <p class="url-hint" id="urlHint"></p>
      </div>

      <!-- Meeting Goal Selector -->
      <div class="goal-section">
        <label class="input-label">Meeting Goal</label>
        <div class="goal-grid">
          <button class="goal-btn active" data-goal="networking">
            <svg class="goal-icon" width="20" height="20" viewBox="0 0 256 256" fill="currentColor">
              <path d="M119.76,217.94A8,8,0,0,1,112,224a8.13,8.13,0,0,1-2-.24l-32-8a8,8,0,0,1-2.5-1.11l-24-16a8,8,0,1,1,8.88-13.31l22.84,15.23,30.66,7.67A8,8,0,0,1,119.76,217.94Zm132.69-96.27a15.91,15.91,0,0,1-6.57,10.67l-32,24a16,16,0,0,1-9.6,3.2H176v40a16,16,0,0,1-16,16H144a16,16,0,0,1-16-16V168a16,16,0,0,1,16-16h28.19L199.8,131.2a16,16,0,0,1,9.6-3.2h26.82A8,8,0,0,0,244,120a8,8,0,0,0-8-8H208a8,8,0,0,1,0-16h28a24,24,0,0,1,16.45,41.67ZM144,184H144V168h0Zm-34.24,33.94A8,8,0,0,0,112,224a8.13,8.13,0,0,0,2-.24,8,8,0,0,0,5.7-9.8L96,128H64a16,16,0,0,0-16,16v40a16,16,0,0,0,16,16h16ZM20,128a24,24,0,0,0,16.45-41.67A15.91,15.91,0,0,0,30,75.67a16,16,0,0,0-9.6,3.2l-32,24A8,8,0,0,0,0,120a8,8,0,0,0,8,8Zm36-16a8,8,0,0,0,0,16H84.19L111.8,148.8a16,16,0,0,0,9.6,3.2H144v40a16,16,0,0,0,16,16h16a16,16,0,0,0,16-16V152a16,16,0,0,0-16-16H148.19L120.58,115.2a16,16,0,0,0-9.6-3.2Z"/>
            </svg>
            <span>Networking</span>
          </button>
          <button class="goal-btn" data-goal="sales">
            <svg class="goal-icon" width="20" height="20" viewBox="0 0 256 256" fill="currentColor">
              <path d="M216,64H176a48,48,0,0,0-96,0H40A16,16,0,0,0,24,80V200a16,16,0,0,0,16,16H216a16,16,0,0,0,16-16V80A16,16,0,0,0,216,64ZM128,32a32,32,0,0,1,32,32H96A32,32,0,0,1,128,32Zm88,168H40V80H80V96a8,8,0,0,0,16,0V80h64V96a8,8,0,0,0,16,0V80h40Z"/>
            </svg>
            <span>Sales</span>
          </button>
          <button class="goal-btn" data-goal="hiring">
            <svg class="goal-icon" width="20" height="20" viewBox="0 0 256 256" fill="currentColor">
              <path d="M256,136a8,8,0,0,1-8,8H232v16a8,8,0,0,1-16,0V144H200a8,8,0,0,1,0-16h16V112a8,8,0,0,1,16,0v16h16A8,8,0,0,1,256,136Zm-57.87,58.85a8,8,0,0,1-12.26,10.3C165.75,181.19,138.09,168,108,168s-57.75,13.19-77.87,37.15a8,8,0,0,1-12.26-10.3c14.94-17.78,33.52-30.41,54.17-37.17a68,68,0,1,1,71.92,0C164.6,164.44,183.18,177.07,198.13,194.85ZM108,152a52,52,0,1,0-52-52A52.06,52.06,0,0,0,108,152Z"/>
            </svg>
            <span>Hiring</span>
          </button>
          <button class="goal-btn" data-goal="investor">
            <svg class="goal-icon" width="20" height="20" viewBox="0 0 256 256" fill="currentColor">
              <path d="M232,208a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V48a8,8,0,0,1,16,0V156.69l50.34-50.35a8,8,0,0,1,11.32,0L128,132.69,180.69,80H160a8,8,0,0,1,0-16h40a8,8,0,0,1,8,8v40a8,8,0,0,1-16,0V91.31l-58.34,58.35a8,8,0,0,1-11.32,0L96,123.31,40,179.31V200H224A8,8,0,0,1,232,208Z"/>
            </svg>
            <span>Investor</span>
          </button>
        </div>
      </div>

      <!-- Generate Button -->
      <button class="btn btn-primary btn-generate" id="generateBtn">
        <svg class="btn-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
        </svg>
        <span id="generateText">Generate Brief</span>
      </button>

      <!-- Usage Info -->
      <div class="usage-row">
        <span class="usage-text"><span id="usedCount">0</span>/<span id="limitCount">10</span> briefs used</span>
        <span class="usage-reset">Resets <span id="resetDate">in 30 days</span></span>
      </div>
    </div>

    <!-- Success State - Brief Generated -->
    <div class="popup-state hidden" id="successState">
      <div class="success-content">
        <div class="success-icon">
          <svg width="28" height="28" viewBox="0 0 256 256" fill="currentColor">
            <path d="M229.66,77.66l-128,128a8,8,0,0,1-11.32,0l-56-56a8,8,0,0,1,11.32-11.32L96,188.69,218.34,66.34a8,8,0,0,1,11.32,11.32Z"/>
          </svg>
        </div>
        <h2>Brief Generated!</h2>
        <p id="successName">John Doe</p>
        <div class="success-actions">
          <button class="btn btn-primary" id="viewBriefBtn">View Brief</button>
          <button class="btn btn-secondary" id="newBriefBtn">New Brief</button>
        </div>
      </div>
    </div>

    <!-- Error State -->
    <div class="popup-state hidden" id="errorState">
      <div class="error-content">
        <div class="error-icon">
          <svg width="28" height="28" viewBox="0 0 256 256" fill="currentColor">
            <path d="M236.8,188.09,149.35,36.22h0a24.76,24.76,0,0,0-42.7,0L19.2,188.09a23.51,23.51,0,0,0,0,23.72A24.35,24.35,0,0,0,40.55,224h174.9a24.35,24.35,0,0,0,21.33-12.19A23.51,23.51,0,0,0,236.8,188.09ZM120,104a8,8,0,0,1,16,0v40a8,8,0,0,1-16,0Zm8,88a12,12,0,1,1,12-12A12,12,0,0,1,128,192Z"/>
          </svg>
        </div>
        <h2>Something went wrong</h2>
        <p id="errorMessage">Please try again</p>
        <button class="btn btn-primary" id="retryBtn">Try Again</button>
      </div>
    </div>

    <!-- Footer -->
    <footer class="popup-footer" id="mainFooter">
      <button class="footer-btn" id="settingsBtn">Settings</button>
      <span class="footer-sep"></span>
      <button class="footer-btn" id="signOutBtn">Sign Out</button>
    </footer>
  </div>

  <script src="popup.js" type="module"></script>
</body>
</html>
